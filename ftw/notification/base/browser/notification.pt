<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="ftw.notification.base">

<head>
  <metal:js fill-slot="javascript_head_slot">
    <script type="text/javascript"
            tal:attributes="src string:${here/portal_url}/++resource++ftw.notification.base.resources/select2.js">js code</script>
    <script type="text/javascript"
            tal:attributes="src string:${here/portal_url}/++resource++ftw.notification.base.resources/integration.js">js code</script>

    <script type="text/javascript" tal:define="pre_select view/json_pre_select;
                                               allow_new python:str(view.allow_email_not_in_vocab()).lower()"
            tal:content="structure string:
      $(function(){
        initTokenInput('users-to', ${pre_select}, ${allow_new});
        initTokenInput('users-cc', [], ${allow_new});
      });">
    </script>

  </metal:js>

  <metal:css fill-slot="style_slot">
    <link rel="stylesheet"  media="screen" tal:attributes="href string:${here/portal_url}/++resource++ftw.notification.base.resources/select2.css" />
  </metal:css>
</head>

<body>
<div metal:fill-slot="main" class="notification_form">
    <metal:main-macro define-macro="main">
    <h1 i18n:translate="label_send_notification">Send Notification</h1>
    <form name="sendto_form"
          action="sendto_form"
          method="post"
          enctype="multipart/form-data"
          tal:attributes="action string:${here/absolute_url}/notification_form">


      <div class="field">
        <label class="formQuestion" for="user-to" i18n:translate="">
          To
        </label>
        <div class="fieldErrorBox"></div>
        <input type="hidden" id="users-to" name="users-to" />
      </div>

      <div class="field">
        <label class="formQuestion" for="user-cc" i18n:translate="">
          CC
        </label>
        <div class="fieldErrorBox"></div>
        <input type="text" id="users-cc" name="users-cc" />
      </div>

      <div class="field">
        <label class="formQuestion" for="comment" i18n:translate="">
          Comment
        </label>
        <div class="fieldErrorBox"></div>
        <textarea type="text" id="comment" name="comment"></textarea>
      </div>



        <div class="formControls" i18n:domain="plone">

          <input type="hidden" name="form.submitted" value="1" />
          <input class="context"
                 tabindex=""
                 type="submit"
                 name="form.button.Send"
                 value="Send"
                 i18n:attributes="value label_send"
                 />
          <input class="standalone"
                 tabindex=""
                 type="submit"
                 name="form.button.Cancel"
                 value="Cancel"
                 i18n:attributes="value label_cancel"
                 />
        </div>

    </form>
  </metal:main-macro>
</div>

</body>
</html>
